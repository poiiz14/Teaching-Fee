<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≠‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="data:,">
  <link rel="icon" href="favicon.ico">
  <style>
    body { font-family: 'Sarabun', sans-serif; }
    .pastel-bg { background: linear-gradient(135deg,#ffeef8 0%,#f0f9ff 50%,#f0fdf4 100%); }
    .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    .status-pill { border:0; border-radius:9999px; padding:4px 10px; font-weight:600; font-size:12px; }
    .status-pending { background: linear-gradient(45deg,#fef3c7,#fde68a); }
    .status-processing { background: linear-gradient(45deg,#dbeafe,#bfdbfe); }
    .status-revision { background: linear-gradient(45deg,#fed7d7,#fbb6ce); }
    .status-recheck { background: linear-gradient(45deg,#e0e7ff,#c7d2fe); }
    .status-finance { background: linear-gradient(45deg,#d1fae5,#a7f3d0); }
    .status-completed { background: linear-gradient(45deg,#dcfce7,#bbf7d0); }
    .modal-bg{ background: rgba(0,0,0,.35); }
    #apiInfo{ font-size:12px; color:#64748b }
    #apiInfo { display: none !important; }
    .fy-tab { padding: .5rem 1rem; border-radius: .5rem .5rem 0 0; background:#f3e8ff; color:#6b21a8; font-weight:600; }
    .fy-tab.active { background:#fff; border:1px solid #e9d5ff; border-bottom:0; color:#4c1d95; }
  </style>
</head>
<body class="pastel-bg min-h-screen">
  <div class="container mx-auto px-4 py-8">
    <div class="text-center mb-6">
      <h1 class="text-4xl font-bold text-purple-800 mb-2">üéì ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≠‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h1>
      <p class="text-purple-600">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©</p>
    </div>

    <!-- ‡πÅ‡∏ó‡πá‡∏ö‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì -->
    <div class="bg-white rounded-2xl card-shadow mb-6">
      <div class="px-4 pt-3 border-b border-purple-100 flex items-center justify-between">
        <div class="flex items-end gap-2" id="fyTabs"></div>
        <div class="py-2">
          <button id="addFYBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg text-sm">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏µ‡∏á‡∏ö‡∏Ø</button>
        </div>
      </div>
      <div class="px-4 pb-3 text-sm text-slate-500">
        ‡∏õ‡∏µ‡∏á‡∏ö‡∏Ø ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="currentFYLabel" class="font-semibold text-purple-700"></span>
      </div>
    </div>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° -->
    <div class="bg-white rounded-2xl card-shadow p-6 mb-8">
      <h2 class="text-2xl font-semibold text-purple-800 mb-6">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h2>
      <form id="recordForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div><label class="block text-sm font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</label><input id="subject" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div><label class="block text-sm font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©</label><input id="teacher" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div>
          <label class="block text-sm font-medium mb-2">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
          <select id="semester" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required>
            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</option>
            <option value="‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 1">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 1</option>
            <option value="‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 2">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 2</option>
            <option value="‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô</option>
          </select>
        </div>
        <div><label class="block text-sm font-medium mb-2">‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label><input id="academicYear" type="number" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div><label class="block text-sm font-medium mb-2">‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</label><input id="budgetYear" type="number" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div><label class="block text-sm font-medium mb-2">‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏á‡∏¥‡∏ô</label><input id="category" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div><label class="block text-sm font-medium mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label><input id="amount" type="number" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div><label class="block text-sm font-medium mb-2">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å</label><input id="month" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
        <div><label class="block text-sm font-medium mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</label><input id="note" class="w-full px-3 py-2 border border-purple-200 rounded-lg"></div>
        <div class="md:col-span-2 lg:col-span-3">
          <button type="submit" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </div>
      </form>
    </div>

    <!-- ‡∏™‡∏£‡∏∏‡∏õ -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl p-6 card-shadow">
        <h3 class="text-lg font-semibold text-blue-800 mb-2">üí∞ ‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
        <p id="totalAmount" class="text-3xl font-bold text-blue-900">0 ‡∏ö‡∏≤‡∏ó</p>
      </div>
      <div class="bg-gradient-to-br from-green-100 to-green-200 rounded-2xl p-6 card-shadow">
        <h3 class="text-lg font-semibold text-green-800 mb-2">üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
        <p id="totalRecords" class="text-3xl font-bold text-green-900">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
      </div>
      <div class="bg-gradient-to-br from-pink-100 to-pink-200 rounded-2xl p-6 card-shadow">
        <h3 class="text-lg font-semibold text-pink-800 mb-2">‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß</h3>
        <p id="completedRecords" class="text-3xl font-bold text-pink-900">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
      </div>
      <div class="bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl p-6 card-shadow">
        <h3 class="text-lg font-semibold text-purple-800 mb-2">üìÇ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏á‡∏¥‡∏ô</h3>
        <div id="categorySummary" class="text-purple-900 text-sm leading-6">- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -</div>
      </div>
    </div>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
    <div class="bg-white rounded-2xl card-shadow overflow-hidden">
      <div class="p-6 border-b border-gray-200 flex items-center justify-between">
        <h3 class="text-xl font-semibold text-purple-800">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
        <button onclick="exportCSV()" class="bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg text-sm">‚¨áÔ∏è ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV</button>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gradient-to-r from-purple-50 to-pink-50">
            <tr>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏á‡∏¥‡∏ô</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
              <th class="px-4 py-3 text-left text-sm font-semibold text-purple-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
          </thead>
          <tbody id="recordsTable"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
  <div id="editModal" class="hidden fixed inset-0 z-50 modal-bg flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-4xl w-full card-shadow">
      <div class="px-6 py-4 border-b flex items-center justify-between">
        <h3 class="text-xl font-semibold text-purple-800">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
        <button class="text-gray-500 hover:text-gray-800" onclick="closeEditModal()">‚úñ</button>
      </div>
      <div class="p-6">
        <form id="editForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <input type="hidden" id="edit_id">
          <div><label class="block text-sm font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</label><input id="edit_subject" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div><label class="block text-sm font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©</label><input id="edit_teacher" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div>
            <label class="block text-sm font-medium mb-2">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
            <select id="edit_semester" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required>
              <option value="‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 1">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 1</option>
              <option value="‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 2">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà 2</option>
              <option value="‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô">‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô</option>
            </select>
          </div>
          <div><label class="block text-sm font-medium mb-2">‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label><input id="edit_academicYear" type="number" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div><label class="block text-sm font-medium mb-2">‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</label><input id="edit_budgetYear" type="number" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div><label class="block text-sm font-medium mb-2">‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏á‡∏¥‡∏ô</label><input id="edit_category" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div><label class="block text-sm font-medium mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label><input id="edit_amount" type="number" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div><label class="block text-sm font-medium mb-2">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å</label><input id="edit_month" class="w-full px-3 py-2 border border-purple-200 rounded-lg" required></div>
          <div><label class="block text-sm font-medium mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</label><input id="edit_note" class="w-full px-3 py-2 border border-purple-200 rounded-lg"></div>
          <div class="md:col-span-2 lg:col-span-3 flex gap-3">
            <button class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg" type="submit">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <button class="bg-gray-100 px-6 py-3 rounded-lg" type="button" onclick="closeEditModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÑ‡∏ß‡πâ‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡πÄ‡∏™‡∏°‡∏≠ -->
  <script defer src="./app.js"></script>
</body>
</html>
